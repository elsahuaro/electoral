"use strict";function _slicedToArray(a,b){return _arrayWithHoles(a)||_iterableToArrayLimit(a,b)||_unsupportedIterableToArray(a,b)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArrayLimit(a,b){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(a)){var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=a[Symbol.iterator]();!(d=(g=h.next()).done)&&(c.push(g.value),!(b&&c.length===b));d=!0);}catch(a){e=!0,f=a}finally{try{d||null==h["return"]||h["return"]()}finally{if(e)throw f}}return c}}function _arrayWithHoles(a){if(Array.isArray(a))return a}function _createForOfIteratorHelper(a,b){var c;if("undefined"==typeof Symbol||null==a[Symbol.iterator]){if(Array.isArray(a)||(c=_unsupportedIterableToArray(a))||b&&a&&"number"==typeof a.length){c&&(a=c);var d=0,e=function(){};return{s:e,n:function n(){return d>=a.length?{done:!0}:{done:!1,value:a[d++]}},e:function e(a){throw a},f:e}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var f,g=!0,h=!1;return{s:function s(){c=a[Symbol.iterator]()},n:function n(){var a=c.next();return g=a.done,a},e:function e(a){h=!0,f=a},f:function f(){try{g||null==c["return"]||c["return"]()}finally{if(h)throw f}}}}function _unsupportedIterableToArray(a,b){if(a){if("string"==typeof a)return _arrayLikeToArray(a,b);var c=Object.prototype.toString.call(a).slice(8,-1);return"Object"===c&&a.constructor&&(c=a.constructor.name),"Map"===c||"Set"===c?Array.from(a):"Arguments"===c||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c)?_arrayLikeToArray(a,b):void 0}}function _arrayLikeToArray(a,b){(null==b||b>a.length)&&(b=a.length);for(var c=0,d=Array(b);c<b;c++)d[c]=a[c];return d}var today,selected,cal_data={};window.addEventListener("load",function(){today=moment(),selected=moment(today).startOf("month"),buildCalendar(today.year(),today.month())});var prevMonth=function(){selected.add(-1,"month"),buildCalendar(selected.year(),selected.month())},nextMonth=function(){selected.add(1,"month"),buildCalendar(selected.year(),selected.month())},resetDate=function(){selected=moment(today).startOf("month"),buildCalendar(selected.year(),selected.month())},dows=["Domingo","Lunes","Martes","Mi\xE9rcoles","Jueves","Viernes","S\xE1bado"],meses=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],fullDayString=function(a){return dows[a.day()]+" "+a.date()},monthYearString=function(a){return meses[a.month()]+" "+a.year()},openPopup=function(a){return function(){if(window.matchMedia("all and (min-width:480px)").matches){var b=document.getElementById("popupdate"),c=document.getElementById("popupcontent");c.innerHTML="",b.innerHTML=fullDayString(a)+" de "+monthYearString(moment({year:a.year(),month:a.month()}));var d,e=cal_data[a.year()][a.month()][a.date()],f=_createForOfIteratorHelper(e);try{for(f.s();!(d=f.n()).done;){var g=d.value,h=document.createElement("div"),i=document.createTextNode(g);h.classList.add("popupentry"),h.appendChild(i),c.appendChild(h)}}catch(a){f.e(a)}finally{f.f()}var j=document.getElementById("calpopup");j.style.visibility="visible",j.style.opacity=1}}},closePopup=function(){var a=document.getElementById("calpopup");a.style.visibility="hidden",a.style.opacity=0},buildCalendar=function(a,b){var c=document.getElementById("calendar"),e=document.getElementsByClassName("monthyear");c.innerHTML="";var f,g=_createForOfIteratorHelper(e);try{for(g.s();!(f=g.n()).done;){var y=f.value;y.innerHTML=""}}catch(a){g.e(a)}finally{g.f()}var h,i=calcCalendar(a,b),j=_createForOfIteratorHelper(i);try{for(j.s();!(h=j.n()).done;){var k=h.value,d=document.createElement("div");d.classList.add("day"),k.month()==b?d.classList.add("inmonth"):d.classList.add("outmonth"),k.date()==today.date()&&k.month()==today.month()&&k.year()==today.year()&&d.classList.add("today");var l=document.createElement("div");l.classList.add("daylabel");var m=document.createTextNode(k.date());l.appendChild(m);var n=document.createElement("div");n.classList.add("fulldaylabel");var o=document.createTextNode(fullDayString(k));if(n.appendChild(o),d.appendChild(l),d.appendChild(n),k.year()in cal_data&&k.month()in cal_data[k.year()]&&k.date()in cal_data[k.year()][k.month()]){var p,q=cal_data[k.year()][k.month()][k.date()],r=_createForOfIteratorHelper(q);try{for(r.s();!(p=r.n()).done;){var s=p.value,t=document.createElement("div"),u=document.createTextNode(s);t.classList.add("entry"),t.appendChild(u),d.appendChild(t)}}catch(a){r.e(a)}finally{r.f()}k.month()==b&&(d.onclick=openPopup(k))}else d.classList.add("noentry");c.appendChild(d)}}catch(a){j.e(a)}finally{j.f()}var v,w=monthYearString(moment({year:a,month:b})),x=_createForOfIteratorHelper(e);try{for(x.s();!(v=x.n()).done;){var z=v.value;z.appendChild(document.createTextNode(w))}}catch(a){x.e(a)}finally{x.f()}},calcCalendar=function(a,b){for(var c,e=moment({year:a,month:b}).startOf("month"),f=moment(e).add(1,"month").add(-1,"day"),g={},h=moment(e);0<=f.diff(h);h.add(1,"day"))c=h.isoWeekYear()+"_"+h.isoWeek(),c in g||(g[c]={week:h.isoWeek(),year:h.isoWeekYear()});for(var i=[],j=0,k=Object.entries(g);j<k.length;j++)for(var l=_slicedToArray(k[j],2),m=l[0],n=l[1],o=1;7>=o;o++)i.push(moment().isoWeekYear(n.year).isoWeek(n.week).day(o));return i};
