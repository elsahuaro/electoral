"use strict";function _slicedToArray(a,b){return _arrayWithHoles(a)||_iterableToArrayLimit(a,b)||_unsupportedIterableToArray(a,b)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArrayLimit(a,b){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(a)){var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=a[Symbol.iterator]();!(d=(g=h.next()).done)&&(c.push(g.value),!(b&&c.length===b));d=!0);}catch(a){e=!0,f=a}finally{try{d||null==h["return"]||h["return"]()}finally{if(e)throw f}}return c}}function _arrayWithHoles(a){if(Array.isArray(a))return a}function _createForOfIteratorHelper(a,b){var c;if("undefined"==typeof Symbol||null==a[Symbol.iterator]){if(Array.isArray(a)||(c=_unsupportedIterableToArray(a))||b&&a&&"number"==typeof a.length){c&&(a=c);var d=0,e=function(){};return{s:e,n:function n(){return d>=a.length?{done:!0}:{done:!1,value:a[d++]}},e:function e(a){throw a},f:e}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var f,g=!0,h=!1;return{s:function s(){c=a[Symbol.iterator]()},n:function n(){var a=c.next();return g=a.done,a},e:function e(a){h=!0,f=a},f:function f(){try{g||null==c.return||c.return()}finally{if(h)throw f}}}}function _unsupportedIterableToArray(a,b){if(a){if("string"==typeof a)return _arrayLikeToArray(a,b);var c=Object.prototype.toString.call(a).slice(8,-1);return"Object"===c&&a.constructor&&(c=a.constructor.name),"Map"===c||"Set"===c?Array.from(a):"Arguments"===c||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c)?_arrayLikeToArray(a,b):void 0}}function _arrayLikeToArray(a,b){(null==b||b>a.length)&&(b=a.length);for(var c=0,d=Array(b);c<b;c++)d[c]=a[c];return d}var today,selected,cal_data={};window.addEventListener("load",function(){today=moment(),selected=moment(today).startOf("month"),buildCalendar(today.year(),today.month())});var prevMonth=function(){selected.add(-1,"month"),buildCalendar(selected.year(),selected.month())},nextMonth=function(){selected.add(1,"month"),buildCalendar(selected.year(),selected.month())},resetDate=function(){selected=moment(today).startOf("month"),buildCalendar(selected.year(),selected.month())},dows=["Domingo","Lunes","Martes","Mi\xE9rcoles","Jueves","Viernes","S\xE1bado"],meses=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],fullDayString=function(a){return dows[a.day()]+" "+a.date()},monthYearString=function(a){return meses[a.month()]+" "+a.year()},openPopup=function(a){return function(){if(window.matchMedia("all and (min-width:480px)").matches){var b=document.getElementById("popupdate"),c=document.getElementById("popupcontent");c.innerHTML="",b.innerHTML=fullDayString(a)+" de "+monthYearString(moment({year:a.year(),month:a.month()}));var d,e=cal_data[a.year()][a.month()][a.date()],f=_createForOfIteratorHelper(e);try{for(f.s();!(d=f.n()).done;){var g=d.value,h=document.createElement("div"),i=document.createTextNode(g);h.classList.add("popupentry"),h.appendChild(i),c.appendChild(h)}}catch(a){f.e(a)}finally{f.f()}var j=document.getElementById("calpopup");j.style.visibility="visible",j.style.opacity=1}}},closePopup=function(){var a=document.getElementById("calpopup");a.style.visibility="hidden",a.style.opacity=0},buildCalendar=function(a,b){var c=document.getElementById("calendar"),e=document.getElementsByClassName("monthyear");c.innerHTML="";for(var f,g=0,h=Array.from(e);g<h.length;g++)f=h[g],f.innerHTML="";var i,j=calcCalendar(a,b),k=_createForOfIteratorHelper(j);try{for(k.s();!(i=k.n()).done;){var l=i.value,d=document.createElement("div");d.classList.add("day"),l.month()==b?d.classList.add("inmonth"):d.classList.add("outmonth"),l.date()==today.date()&&l.month()==today.month()&&l.year()==today.year()&&d.classList.add("today");var m=document.createElement("div");m.classList.add("daylabel");var n=document.createTextNode(l.date());m.appendChild(n);var o=document.createElement("div");o.classList.add("fulldaylabel");var p=document.createTextNode(fullDayString(l));if(o.appendChild(p),d.appendChild(m),d.appendChild(o),l.year()in cal_data&&l.month()in cal_data[l.year()]&&l.date()in cal_data[l.year()][l.month()]){var q,r=cal_data[l.year()][l.month()][l.date()],s=_createForOfIteratorHelper(r);try{for(s.s();!(q=s.n()).done;){var t=q.value,u=document.createElement("div"),v=document.createTextNode(t);u.classList.add("entry"),u.appendChild(v),d.appendChild(u)}}catch(a){s.e(a)}finally{s.f()}l.month()==b&&(d.onclick=openPopup(l))}else d.classList.add("noentry");c.appendChild(d)}}catch(a){k.e(a)}finally{k.f()}for(var w,x=monthYearString(moment({year:a,month:b})),y=0,z=Array.from(e);y<z.length;y++)w=z[y],w.appendChild(document.createTextNode(x))},calcCalendar=function(a,b){for(var c,e=moment({year:a,month:b}).startOf("month"),f=moment(e).add(1,"month").add(-1,"day"),g={},h=moment(e);0<=f.diff(h);h.add(1,"day"))c=h.isoWeekYear()+"_"+h.isoWeek(),c in g||(g[c]={week:h.isoWeek(),year:h.isoWeekYear()});for(var i=[],j=0,k=Object.entries(g);j<k.length;j++)for(var l=_slicedToArray(k[j],2),m=l[0],n=l[1],o=1;7>=o;o++)i.push(moment().isoWeekYear(n.year).isoWeek(n.week).isoWeekday(o));return i};
